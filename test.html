<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Money in Ugolok</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            background: #333;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üéÆ –¢–µ—Å—Ç Money in Ugolok</h1>
    
    <div class="test-section">
        <h2>üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π</h2>
        <button onclick="testWorkers()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—á–∏—Ö</button>
        <button onclick="testIncome()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Ö–æ–¥</button>
        <button onclick="testExperience()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—ã—Ç</button>
        <button onclick="addTestWorker()">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ</button>
        <div id="status" class="status">–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</div>
    </div>
    
    <div class="test-section">
        <h2>üí∞ –ë–∞–ª–∞–Ω—Å</h2>
        <div>–î–µ–Ω—å–≥–∏: <span id="balance">0</span></div>
        <div>–®–∞—Ä–¥—ã: <span id="shardsBalance">0</span></div>
        <div>–î–æ—Ö–æ–¥/—Å–µ–∫: <span id="incomePerSecond">0</span></div>
    </div>
    
    <div class="test-section">
        <h2>üë∑ –†–∞–±–æ—á–∏–µ</h2>
        <div id="workersInfo">–†–∞–±–æ—á–∏—Ö –Ω–µ—Ç</div>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ script.js
        let gameData = {
            balance: 1000,
            shards: 0,
            workers: [],
            totalIncomePerSecond: 0,
            city: { totalBonus: 1.0 },
            rocket: { isFlying: false, worker: null }
        };
        
        let gameSettings = { icon: "üí∞" };
        let prestigeData = { prestigeUpgrades: [] };
        
        const MAX_INCOME_PER_SECOND = 1000000000;
        const MAX_CITY_MULTIPLIER = 100;

        function formatNumber(num) {
            if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
            if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
            return Math.floor(num).toString();
        }

        function getBuildingBonus(type) {
            return 1.0; // –ó–∞–≥–ª—É—à–∫–∞
        }

        function showNotification(message, type) {
            console.log(`[${type}] ${message}`);
            document.getElementById('status').textContent = `[${type}] ${message}`;
        }

        function updateBalance() {
            const balanceElement = document.getElementById('balance');
            if (balanceElement) {
                balanceElement.textContent = formatNumber(Math.floor(gameData.balance));
            }
            
            const shardsElement = document.getElementById('shardsBalance');
            if (shardsElement) {
                shardsElement.textContent = formatNumber(gameData.shards);
            }
        }

        function updateIncomePerSecond() {
            const incomeElement = document.getElementById('incomePerSecond');
            if (incomeElement) {
                const totalWithBonus = Math.min(gameData.totalIncomePerSecond * gameData.city.totalBonus, MAX_INCOME_PER_SECOND);
                incomeElement.textContent = formatNumber(totalWithBonus);
            }
        }

        function updatePassiveIncome() {
            let totalIncome = 0;
            
            gameData.workers.forEach(worker => {
                let workerIncome = worker.income;
                const incomeMultiplier = Math.min(getBuildingBonus('incomeMultiplier'), MAX_CITY_MULTIPLIER);
                workerIncome = workerIncome * incomeMultiplier;
                totalIncome += workerIncome;
            });
            
            gameData.totalIncomePerSecond = Math.min(totalIncome, MAX_INCOME_PER_SECOND);
            updateIncomePerSecond();
        }

        function startExperienceTimer() {
            setInterval(() => {
                let experienceMultiplier = Math.min(getBuildingBonus('experienceMultiplier'), MAX_CITY_MULTIPLIER);
                
                gameData.workers.forEach(worker => {
                    const experienceGain = (worker.income / 10) * experienceMultiplier;
                    worker.experience += experienceGain;
                    
                    if (worker.experience >= worker.maxExperience) {
                        worker.experience = worker.experience - worker.maxExperience;
                        worker.level++;
                        worker.maxExperience = Math.floor(worker.maxExperience * 1.5);
                        worker.income = Math.floor(worker.income * 1.2);
                        
                        showNotification(`üéâ ${worker.name} –¥–æ—Å—Ç–∏–≥ ${worker.level} —É—Ä–æ–≤–Ω—è!`, 'success');
                        updatePassiveIncome();
                        updateWorkersInfo();
                    }
                });
            }, 1000);
        }

        let lastGameUpdate = 0;
        function startPassiveIncome() {
            setInterval(() => {
                const now = Date.now();
                if (now - lastGameUpdate < 50) return;
                lastGameUpdate = now;
                
                const totalWithBonus = Math.min(gameData.totalIncomePerSecond * gameData.city.totalBonus, MAX_INCOME_PER_SECOND);
                gameData.balance += totalWithBonus / 20;
                
                updateBalance();
                updateIncomePerSecond();
            }, 50);
        }

        function updateWorkersInfo() {
            const workersInfo = document.getElementById('workersInfo');
            if (gameData.workers.length === 0) {
                workersInfo.innerHTML = '–†–∞–±–æ—á–∏—Ö –Ω–µ—Ç';
            } else {
                let html = `<div>–í—Å–µ–≥–æ —Ä–∞–±–æ—á–∏—Ö: ${gameData.workers.length}</div>`;
                gameData.workers.forEach(worker => {
                    const expPercent = worker.maxExperience > 0 ? Math.min((worker.experience / worker.maxExperience) * 100, 100) : 0;
                    html += `
                        <div style="margin: 5px 0; padding: 5px; background: #333; border-radius: 4px;">
                            <strong>${worker.icon} ${worker.name}</strong> (—É—Ä. ${worker.level}) - 
                            –¥–æ—Ö–æ–¥: ${formatNumber(worker.income)}/—Å–µ–∫ - 
                            –æ–ø—ã—Ç: ${Math.floor(worker.experience)}/${worker.maxExperience} (${expPercent.toFixed(1)}%)
                        </div>
                    `;
                });
                workersInfo.innerHTML = html;
            }
        }

        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function testWorkers() {
            updateWorkersInfo();
            showNotification(`–†–∞–±–æ—á–∏—Ö: ${gameData.workers.length}`, 'info');
        }

        function testIncome() {
            updatePassiveIncome();
            showNotification(`–î–æ—Ö–æ–¥: ${formatNumber(gameData.totalIncomePerSecond)}/—Å–µ–∫`, 'info');
        }

        function testExperience() {
            showNotification(`–¢–∞–π–º–µ—Ä –æ–ø—ã—Ç–∞ –∑–∞–ø—É—â–µ–Ω`, 'info');
        }

        function addTestWorker() {
            const worker = {
                id: Date.now(),
                name: '–¢–µ—Å—Ç–æ–≤—ã–π —Ä–∞–±–æ—á–∏–π',
                icon: 'ü§ñ',
                income: 100,
                level: 1,
                experience: 0,
                maxExperience: 100,
                rarity: 'common'
            };
            gameData.workers.push(worker);
            updatePassiveIncome();
            updateWorkersInfo();
            showNotification(`–î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–±–æ—á–∏–π: ${worker.name}`, 'success');
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            updateBalance();
            updateIncomePerSecond();
            updateWorkersInfo();
            startExperienceTimer();
            startPassiveIncome();
            showNotification('–ò–≥—Ä–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!', 'success');
        };
    </script>
</body>
</html>
